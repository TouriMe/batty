!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(r),r}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function r(){return t.$el.text().length}function n(e){if(t.opts.charCounterMax<0)return!0;if(r()<t.opts.charCounterMax)return!0;var n=e.which;return!t.keys.ctrlKey(e)&&t.keys.isCharacter(n)?(e.preventDefault(),e.stopPropagation(),t.events.trigger("charCounter.exceeded"),!1):!0}function o(n){if(t.opts.charCounterMax<0)return n;var o=e("<div>").html(n).text().length;return o+r()<=t.opts.charCounterMax?n:(t.events.trigger("charCounter.exceeded"),"")}function u(){if(t.opts.charCounterCount){var e=r()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");i.text(e),t.opts.toolbarBottom&&i.css("margin-bottom",t.$tb.outerHeight(!0));var n=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;n>=0&&("rtl"==t.opts.direction?i.css("margin-left",n):i.css("margin-right",n))}}function a(){return t.$wp&&t.opts.charCounterCount?(i=e('<span class="fr-counter"></span>'),i.css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(i),t.events.on("keydown",n,!0),t.events.on("paste.afterCleanup",o),t.events.on("keyup contentChanged",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",u),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){e(t.o_win).off("resize.char"+t.id),i.removeData().remove(),i=null})):!1}var i;return{_init:a,count:r}}});