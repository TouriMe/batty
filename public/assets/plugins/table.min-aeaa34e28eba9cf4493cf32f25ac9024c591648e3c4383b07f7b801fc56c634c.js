!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(a),a}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function a(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),a=t.popups.get("table.insert");if(a||(a=r()),!a.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var l=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",l,s,e.outerHeight())}}function l(){var a=_();if(a){var l=t.popups.get("table.edit");l||(l=i()),t.popups.setContainer("table.edit",e(t.opts.scrollableContainer));var s=z(a),n=(s.left+s.right)/2,r=s.bottom;t.popups.show("table.edit",n,r,s.bottom-s.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore(),t.button.bulkRefresh())}}function s(){var a=_();if(a){var l=t.popups.get("table.colors");l||(l=f()),t.popups.setContainer("table.colors",e(t.opts.scrollableContainer));var s=z(a),n=(s.left+s.right)/2,r=s.bottom;c(),t.popups.show("table.colors",n,r,s.bottom-s.top)}}function n(){0===re().length&&t.toolbar.enable()}function r(a){if(a)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var l="";t.opts.tableInsertButtons.length>0&&(l='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var s={buttons:l,rows_columns:o()},n=t.popups.create("table.insert",s);return t.events.$on(n,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(a){var l=e(a.currentTarget),s=l.data("row"),n=l.data("col"),r=l.parent();r.siblings(".fr-table-size-info").html(s+" &times; "+n),r.find("> span").removeClass("hover");for(var o=1;o<=t.opts.tableInsertMaxSize;o++)for(var i=0;i<=t.opts.tableInsertMaxSize;i++){var f=r.find('> span[data-row="'+o+'"][data-col="'+i+'"]');s>=o&&n>=i?f.addClass("hover"):s+1>=o||2>=o&&!t.helpers.isMobile()?f.css("display","inline-block"):o>2&&!t.helpers.isMobile()&&f.css("display","none")}},!0),n}function o(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',a=1;a<=t.opts.tableInsertMaxSize;a++){for(var l=1;l<=t.opts.tableInsertMaxSize;l++){var s="inline-block";a>2&&!t.helpers.isMobile()&&(s="none");var n="fr-table-cell ";1==a&&1==l&&(n+=" hover"),e+='<span class="fr-command '+n+'" data-cmd="tableInsert" data-row="'+a+'" data-col="'+l+'" data-param1="'+a+'" data-param2="'+l+'" style="display: '+s+';"><span></span></span>'}e+='<div class="new-line"></div>'}return e+="</div></div>"}function i(e){if(e)return t.popups.onHide("table.edit",n),!0;var a="";t.opts.tableEditButtons.length>0&&(a='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var s={buttons:a},r=t.popups.create("table.edit",s);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&l()}),r}function f(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var a={buttons:e,colors:d()},l=t.popups.create("table.colors",a);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&s()}),l}function d(){for(var e='<div class="fr-table-colors">',a=0;a<t.opts.tableColors.length;a++)0!==a&&a%t.opts.tableColorsStep===0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[a]?'<span class="fr-command" style="background: '+t.opts.tableColors[a]+';" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[a]+'"></span>':'<span class="fr-command" data-cmd="tableCellBackgroundColor" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i></span>';return e+="</div>"}function c(){var e=t.popups.get("table.colors"),a=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color"),e.find('span[data-param1="'+t.helpers.RGBToHex(a.css("background-color"))+'"]').addClass("fr-selected-color")}function p(a,l){var s,n,r='<table style="width: 100%;"><tbody>',o=100/l;for(s=0;a>s;s++){for(r+="<tr>",n=0;l>n;n++)r+='<td style="width: '+o.toFixed(4)+'%;">',0===s&&0===n&&(r+=e.FE.MARKERS),r+="<br></td>";r+="</tr>"}r+="</tbody></table>",t.html.insert(r),t.selection.restore()}function h(){if(re().length>0){var e=oe();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function u(){var t=oe();if(t.length>0&&0===t.find("th").length){var a,s="<thead><tr>",n=0;for(t.find("tr:first > td").each(function(){var t=e(this);n+=parseInt(t.attr("colspan"),10)||1}),a=0;n>a;a++)s+="<th><br></th>";s+="</tr></thead>",t.prepend(s),l()}}function b(){var e=oe(),a=e.find("thead");if(a.length>0)if(0===e.find("tbody tr").length)h();else if(a.remove(),re().length>0)l();else{t.popups.hide("table.edit");var s=e.find("tbody tr:first td:first").get(0);s&&(t.selection.setAtEnd(s),t.selection.restore())}}function g(a){var s=oe();if(s.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==a)return;var n,r,o=_(),i=D(o);r="above"==a?i.min_i:i.max_i;var f="<tr>";for(n=0;n<o[r].length;n++)if("below"==a&&r<o.length-1&&o[r][n]==o[r+1][n]||"above"==a&&r>0&&o[r][n]==o[r-1][n]){if(0===n||n>0&&o[r][n]!=o[r][n-1]){var d=e(o[r][n]);d.attr("rowspan",parseInt(d.attr("rowspan"),10)+1)}}else f+="<td><br></td>";f+="</tr>";var c=e(s.find("tr").not(s.find("table tr")).get(r));"below"==a?c.after(f):"above"==a&&(c.before(f),t.popups.isVisible("table.edit")&&l())}}function m(){var a=oe();if(a.length>0){var l,s,n,r=_(),o=D(r);if(0===o.min_i&&o.max_i==r.length-1)h();else{for(l=o.max_i;l>=o.min_i;l--){for(n=e(a.find("tr").not(a.find("table tr")).get(l)),s=0;s<r[l].length;s++)if(0===s||r[l][s]!=r[l][s-1]){var i=e(r[l][s]);if(parseInt(i.attr("rowspan"),10)>1){var f=parseInt(i.attr("rowspan"),10)-1;1==f?i.removeAttr("rowspan"):i.attr("rowspan",f)}if(l<r.length-1&&r[l][s]==r[l+1][s]&&(0===l||r[l][s]!=r[l-1][s])){for(var d=r[l][s],c=s;c>0&&r[l][c]==r[l][c-1];)c--;0===c?e(a.find("tr").not(a.find("table tr")).get(l+1)).prepend(d):e(r[l+1][c-1]).after(d)}}var p=n.parent();n.remove(),0===p.find("tr").length&&p.remove(),r=_(a)}o.min_i>0?t.selection.setAtEnd(r[o.min_i-1][0]):t.selection.setAtEnd(r[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function v(a){var s=oe();if(s.length>0){var n,r=_(),o=D(r);n="before"==a?o.min_j:o.max_j;var i,f=100/r[0].length,d=100/(r[0].length+1);s.find("th, td").each(function(){i=e(this),i.data("old-width",i.outerWidth()/s.outerWidth()*100)}),s.find("tr").not(s.find("table tr")).each(function(t){for(var l,s=e(this),o=0,i=0;n>o-1;){if(l=s.find("> th, > td").get(i),!l){l=null;break}l==r[t][o]?(o+=parseInt(e(l).attr("colspan"),10)||1,i++):(o+=parseInt(e(r[t][o]).attr("colspan"),10)||1,"after"==a&&(l=0===i?-1:s.find("> th, > td").get(i-1)))}var c=e(l);if("after"==a&&o-1>n||"before"==a&&n>0&&r[t][n]==r[t][n-1]){if(0===t||t>0&&r[t][n]!=r[t-1][n]){var p=parseInt(c.attr("colspan"),10)+1;c.attr("colspan",p),c.css("width",(c.data("old-width")*d/f+d).toFixed(4)+"%"),c.removeData("old-width")}}else{var h;h=s.find("th").length>0?'<th style="width: '+d.toFixed(4)+'%;"><br></th>':'<td style="width: '+d.toFixed(4)+'%;"><br></td>',-1==l?s.prepend(h):null==l?s.append(h):"before"==a?c.before(h):"after"==a&&c.after(h)}}),s.find("th, td").each(function(){i=e(this),i.data("old-width")&&(i.css("width",(i.data("old-width")*d/f).toFixed(4)+"%"),i.removeData("old-width"))}),t.popups.isVisible("table.edit")&&l()}}function w(){var a=oe();if(a.length>0){var l,s,n,r=_(),o=D(r);if(0===o.min_j&&o.max_j==r[0].length-1)h();else{var i=100/r[0].length,f=100/(r[0].length-o.max_j+o.min_j-1);for(a.find("th, td").each(function(){n=e(this),n.hasClass("fr-selected-cell")||n.data("old-width",n.outerWidth()/a.outerWidth()*100)}),s=o.max_j;s>=o.min_j;s--)for(l=0;l<r.length;l++)if(0===l||r[l][s]!=r[l-1][s])if(n=e(r[l][s]),parseInt(n.attr("colspan"),10)>1){var d=parseInt(n.attr("colspan"),10)-1;1==d?n.removeAttr("colspan"):n.attr("colspan",d),n.css("width",((n.data("old-width")-Q(s,r))*f/i).toFixed(4)+"%"),n.removeData("old-width")}else{var c=e(n.parent().get(0));n.remove(),0===c.find("> th, > td").length&&(0===c.prev().length||0===c.next().length||c.prev().find("> th[rowspan], > td[rowspan]").length<c.prev().find("> th, > td").length)&&c.remove()}o.min_j>0?t.selection.setAtEnd(r[o.min_i][o.min_j-1]):t.selection.setAtEnd(r[o.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),a.find("th, td").each(function(){n=e(this),n.data("old-width")&&(n.css("width",(n.data("old-width")*f/i).toFixed(4)+"%"),n.removeData("old-width"))})}}}function C(){if(re().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var a,s,n,r=_(),o=D(r),i=t.$el.find(".fr-selected-cell"),f=e(i[0]),d=f.parent(),c=d.find(".fr-selected-cell"),p=f.closest("table"),h=f.html(),u=0;for(a=0;a<c.length;a++)u+=e(c[a]).outerWidth();for(f.css("width",(u/d.outerWidth()*100).toFixed(4)+"%"),o.min_j<o.max_j&&f.attr("colspan",o.max_j-o.min_j+1),o.min_i<o.max_i&&f.attr("rowspan",o.max_i-o.min_i+1),a=1;a<i.length;a++)s=e(i[a]),"<br>"!=s.html()&&""!==s.html()&&(h+="<br>"+s.html()),s.remove();f.html(h),t.selection.setAtEnd(f.get(0)),t.selection.restore(),t.toolbar.enable();var b=p.find("tr:empty");for(a=b.length-1;a>=0;a--)n=e(b[a]),(0===n.prev().length||0===n.next().length||n.prev().find("> th[rowspan], > td[rowspan]").length<n.prev().find("> th, > td").length)&&n.remove();l()}}function E(){if(1==re().length){var a=t.$el.find(".fr-selected-cell"),l=a.parent(),s=a.closest("table"),n=parseInt(a.attr("rowspan"),10),r=_(),o=x(a.get(0),r),i=a.clone().html("<br>");if(n>1){var f=Math.ceil(n/2);f>1?a.attr("rowspan",f):a.removeAttr("rowspan"),n-f>1?i.attr("rowspan",n-f):i.removeAttr("rowspan");for(var d=o.row+f,c=0===o.col?o.col:o.col-1;c>=0&&(r[d][c]==r[d][c-1]||d>0&&r[d][c]==r[d-1][c]);)c--;-1==c?e(s.find("tr").not(s.find("table tr")).get(d)).prepend(i):e(r[d][c]).after(i)}else{var p,h=e("<tr>").append(i);for(p=0;p<r[0].length;p++)if(0===p||r[o.row][p]!=r[o.row][p-1]){var u=e(r[o.row][p]);u.is(a)||u.attr("rowspan",(parseInt(u.attr("rowspan"),10)||1)+1)}l.after(h)}I(),t.popups.hide("table.edit")}}function $(){if(1==re().length){var a=t.$el.find(".fr-selected-cell"),l=parseInt(a.attr("colspan"),10)||1,s=a.parent().outerWidth(),n=a.outerWidth(),r=a.clone().html("<br>"),o=_(),i=x(a.get(0),o);if(l>1){var f=Math.ceil(l/2);n=Z(i.col,i.col+f-1,o)/s*100;var d=Z(i.col+f,i.col+l-1,o)/s*100;f>1?a.attr("colspan",f):a.removeAttr("colspan"),l-f>1?r.attr("colspan",l-f):r.removeAttr("colspan"),a.css("width",n.toFixed(4)+"%"),r.css("width",d.toFixed(4)+"%")}else{var c;for(c=0;c<o.length;c++)if(0===c||o[c][i.col]!=o[c-1][i.col]){var p=e(o[c][i.col]);if(!p.is(a)){var h=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",h)}}n=n/s*100/2,a.css("width",n.toFixed(4)+"%"),r.css("width",n.toFixed(4)+"%")}a.after(r),I(),t.popups.hide("table.edit")}}function y(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function M(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function A(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function F(e,t,a,l){if(t.length>0){if(!a){var s=Object.keys(l);s.splice(s.indexOf(e),1),t.removeClass(s.join(" "))}t.toggleClass(e)}}function _(t){t=t||null;var a=[];if(null==t&&re().length>0&&(t=oe()),t){var l=e(t);return l.find("tr").not(l.find("table tr")).each(function(t,l){var s=e(l),n=0;s.find("> th, > td").each(function(l,s){for(var r=e(s),o=parseInt(r.attr("colspan"),10)||1,i=parseInt(r.attr("rowspan"),10)||1,f=t;t+i>f;f++)for(var d=n;n+o>d;d++)a[f]||(a[f]=[]),a[f][d]?n++:a[f][d]=s;n+=o})}),a}}function x(e,t){for(var a=0;a<t.length;a++)for(var l=0;l<t[a].length;l++)if(t[a][l]==e)return{row:a,col:l}}function R(e,t,a){for(var l=e+1,s=t+1;l<a.length;){if(a[l][t]!=a[e][t]){l--;break}l++}for(l==a.length&&l--;s<a[e].length;){if(a[e][s]!=a[e][t]){s--;break}s++}return s==a[e].length&&s--,{row:l,col:s}}function I(){var a=t.$el.find(".fr-selected-cell");a.length>0&&a.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")})}function O(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function D(e){var a,l=e.length,s=0,n=e[0].length,r=0,o=t.$el.find(".fr-selected-cell");for(a=0;a<o.length;a++){var i=x(o[a],e),f=R(i.row,i.col,e);l=Math.min(i.row,l),s=Math.max(f.row,s),n=Math.min(i.col,n),r=Math.max(f.col,r)}return{min_i:l,max_i:s,min_j:n,max_j:r}}function S(t,a,l,s,n){var r,o,i,f,d=t,c=a,p=l,h=s;for(r=d;c>=r;r++)((parseInt(e(n[r][p]).attr("rowspan"),10)||1)>1||(parseInt(e(n[r][p]).attr("colspan"),10)||1)>1)&&(i=x(n[r][p],n),f=R(i.row,i.col,n),d=Math.min(i.row,d),c=Math.max(f.row,c),p=Math.min(i.col,p),h=Math.max(f.col,h)),((parseInt(e(n[r][h]).attr("rowspan"),10)||1)>1||(parseInt(e(n[r][h]).attr("colspan"),10)||1)>1)&&(i=x(n[r][h],n),f=R(i.row,i.col,n),d=Math.min(i.row,d),c=Math.max(f.row,c),p=Math.min(i.col,p),h=Math.max(f.col,h));for(o=p;h>=o;o++)((parseInt(e(n[d][o]).attr("rowspan"),10)||1)>1||(parseInt(e(n[d][o]).attr("colspan"),10)||1)>1)&&(i=x(n[d][o],n),f=R(i.row,i.col,n),d=Math.min(i.row,d),c=Math.max(f.row,c),p=Math.min(i.col,p),h=Math.max(f.col,h)),((parseInt(e(n[c][o]).attr("rowspan"),10)||1)>1||(parseInt(e(n[c][o]).attr("colspan"),10)||1)>1)&&(i=x(n[c][o],n),f=R(i.row,i.col,n),d=Math.min(i.row,d),c=Math.max(f.row,c),p=Math.min(i.col,p),h=Math.max(f.col,h));return d==t&&c==a&&p==l&&h==s?{min_i:t,max_i:a,min_j:l,max_j:s}:S(d,c,p,h,n)}function z(t){var a=D(t),l=e(t[a.min_i][a.min_j]),s=e(t[a.min_i][a.max_j]),n=e(t[a.max_i][a.min_j]),r=l.offset().left,o=s.offset().left+s.outerWidth(),i=l.offset().top,f=n.offset().top+n.outerHeight();return{left:r,right:o,top:i,bottom:f}}function T(a,l){if(e(a).is(l))I(),t.edit.on(),e(a).addClass("fr-selected-cell");else{O(),t.edit.off();var s=_(),n=x(a,s),r=x(l,s),o=S(Math.min(n.row,r.row),Math.max(n.row,r.row),Math.min(n.col,r.col),Math.max(n.col,r.col),s);I();for(var i=o.min_i;i<=o.max_i;i++)for(var f=o.min_j;f<=o.max_j;f++)e(s[i][f]).addClass("fr-selected-cell")}}function k(a){var l=null,s=e(a.target);return"TD"==a.target.tagName||"TH"==a.target.tagName?l=a.target:s.closest("td").length>0?l=s.closest("td").get(0):s.closest("th").length>0&&(l=s.closest("th").get(0)),0===t.$el.find(l).length?null:l}function N(){I(),t.popups.hide("table.edit")}function B(a){var l=k(a);if(re().length>0&&!l&&N(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=a.which||1==a.which&&t.helpers.isMac()&&a.ctrlKey)(3==a.which||1==a.which&&t.helpers.isMac()&&a.ctrlKey)&&l&&N();else if(pe=!0,l){re().length>0&&!a.shiftKey&&N(),a.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),ce=!0;var s=l.tagName.toLowerCase();a.shiftKey&&t.$el.find(s+".fr-selected-cell").length>0?e(t.$el.find(s+".fr-selected-cell").closest("table")).is(e(l).closest("table"))?T(he,l):O():((t.keys.ctrlKey(a)||a.shiftKey)&&(re().length>1||0===e(l).find(t.selection.element()).length&&!e(l).is(t.selection.element()))&&O(),he=l,T(he,he))}}function H(a){if(ce||t.$tb.is(a.target)||t.$tb.is(e(a.target).closest(t.$tb.get(0)))||(re().length>0&&t.toolbar.enable(),I()),!(1!=a.which||1==a.which&&t.helpers.isMac()&&a.ctrlKey)){if(pe=!1,ce){ce=!1;var s=k(a);s||1!=re().length?re().length>0&&(t.selection.isCollapsed()?l():I()):I()}if(be){be=!1,fe.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var n=parseFloat(fe.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(n-=t.$iframe.offset().left),fe.data("release-position",n),fe.removeData("max-left"),fe.removeData("max-right"),J(a),P()}}}function L(a){if(ce===!0){var l=e(a.currentTarget);if(l.closest("table").is(oe())){if("TD"==a.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void T(he,a.currentTarget);if("TH"==a.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void T(he,a.currentTarget)}O()}}function j(e){(37==e.which||38==e.which||39==e.which||40==e.which)&&re().length>0&&N()}function W(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),fe=t.shared.$table_resizer,t.events.$on(fe,"mousedown",function(e){return t.core.sameInstance(fe)?(re().length>0&&N(),1==e.which?(be=!0,fe.addClass("fr-moving"),O(),t.edit.off(),fe.find("div").css("opacity",1),!1):void 0):!0}),t.events.$on(fe,"mousemove",function(e){return t.core.sameInstance(fe)?void(be&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),ee(e))):!0}),t.events.on("shared.destroy",function(){fe.html("").removeData().remove(),fe=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),fe.hide().appendTo(e("body"))},!0)}function P(){fe&&(fe.find("div").css("opacity",0),fe.css("top",0),fe.css("left",0),fe.css("height",0),fe.find("div").css("height",0),fe.hide())}function V(){de&&de.removeClass("fr-visible").css("left","-9999px")}function X(a,l){var s=e(l),n=s.closest("table");if(l&&"TD"!=l.tagName&&"TH"!=l.tagName&&(s.closest("td").length>0?l=s.closest("td"):s.closest("th").length>0&&(l=s.closest("th"))),!l||"TD"!=l.tagName&&"TH"!=l.tagName)fe&&s.get(0)!=fe.get(0)&&s.parent().get(0)!=fe.get(0)&&t.core.sameInstance(fe)&&P();else{if(s=e(l),0===t.$el.find(s).length)return!1;var r=s.offset().left-1,o=r+s.outerWidth();if(Math.abs(a.pageX-r)<=t.opts.tableResizerOffset||Math.abs(o-a.pageX)<=t.opts.tableResizerOffset){var i,f,d,c,p,h=_(n),u=x(l,h),b=R(u.row,u.col,h),g=n.offset().top,m=n.outerHeight()-1;if(u.col>0&&a.pageX-r<=t.opts.tableResizerOffset){d=r;var v=e(h[u.row][u.col-1]);c=1==(parseInt(v.attr("colspan"),10)||1)?v.offset().left-1+t.opts.tableResizingLimit:r-Q(u.col-1,h)+t.opts.tableResizingLimit,p=1==(parseInt(s.attr("colspan"),10)||1)?r+s.outerWidth()-t.opts.tableResizingLimit:r+Q(u.col,h)-t.opts.tableResizingLimit,i=u.col-1,f=u.col}else if(o-a.pageX<=t.opts.tableResizerOffset)if(d=o,b.col<h[b.row].length&&h[b.row][b.col+1]){var w=e(h[b.row][b.col+1]);c=1==(parseInt(s.attr("colspan"),10)||1)?r+t.opts.tableResizingLimit:o-Q(b.col,h)+t.opts.tableResizingLimit,p=1==(parseInt(w.attr("colspan"),10)||1)?o+w.outerWidth()-t.opts.tableResizingLimit:o+Q(u.col+1,h)-t.opts.tableResizingLimit,i=b.col,f=b.col+1}else{i=b.col,f=null;var C=n.parent();c=n.offset().left-1+h[0].length*t.opts.tableResizingLimit,p=C.offset().left-1+C.width()+parseFloat(C.css("padding-left"))}fe||W(),fe.data("table",n),fe.data("first",i),fe.data("second",f),fe.data("instance",t),t.$wp.append(fe);var E=d-t.win.pageXOffset-t.opts.tableResizerOffset,$=g-t.win.pageYOffset;t.opts.iframe&&(E+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),$+=t.$iframe.offset().top-e(t.o_win).scrollTop(),c+=t.$iframe.offset().left,p+=t.$iframe.offset().left),fe.data("max-left",c),fe.data("max-right",p),fe.data("origin",d-t.win.pageXOffset),fe.css("top",$),fe.css("left",E),fe.css("height",m),fe.find("div").css("height",m),fe.css("padding-left",t.opts.tableResizerOffset),fe.css("padding-right",t.opts.tableResizerOffset),fe.show()}else t.core.sameInstance(fe)&&P()}}function K(a,l){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;de||le(),t.$box.append(de),de.data("instance",t);var s=e(l),n=s.find("tr:first"),r=a.pageX,o=0,i=0;t.opts.iframe&&(o+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),i+=t.$iframe.offset().top-e(t.o_win).scrollTop());var f;n.find("th, td").each(function(){var a=e(this);return a.offset().left<=r&&r<a.offset().left+a.outerWidth()/2?(f=parseInt(de.find("a").css("width"),10),de.css("top",i+a.offset().top-t.win.pageYOffset-f-5),de.css("left",o+a.offset().left-t.win.pageXOffset-f/2),de.data("selected-cell",a),de.data("position","before"),de.addClass("fr-visible"),!1):a.offset().left+a.outerWidth()/2<=r&&r<a.offset().left+a.outerWidth()?(f=parseInt(de.find("a").css("width"),10),de.css("top",i+a.offset().top-t.win.pageYOffset-f-5),de.css("left",o+a.offset().left+a.outerWidth()-t.win.pageXOffset-f/2),de.data("selected-cell",a),de.data("position","after"),de.addClass("fr-visible"),!1):void 0})}function Y(a,l){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;de||le(),t.$box.append(de),de.data("instance",t);var s=e(l),n=a.pageY,r=0,o=0;t.opts.iframe&&(r+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),o+=t.$iframe.offset().top-e(t.o_win).scrollTop());var i;s.find("tr").each(function(){var a=e(this);return a.offset().top<=n&&n<a.offset().top+a.outerHeight()/2?(i=parseInt(de.find("a").css("width"),10),de.css("top",o+a.offset().top-t.win.pageYOffset-i/2),de.css("left",r+a.offset().left-t.win.pageXOffset-i-5),de.data("selected-cell",a.find("td:first")),de.data("position","above"),de.addClass("fr-visible"),!1):a.offset().top+a.outerHeight()/2<=n&&n<a.offset().top+a.outerHeight()?(i=parseInt(de.find("a").css("width"),10),de.css("top",o+a.offset().top+a.outerHeight()-t.win.pageYOffset-i/2),de.css("left",r+a.offset().left-t.win.pageXOffset-i-5),de.data("selected-cell",a.find("td:first")),de.data("position","below"),de.addClass("fr-visible"),!1):void 0})}function q(a,l){if(0===re().length){var s,n,r;if(l&&("HTML"==l.tagName||"BODY"==l.tagName||t.node.isElement(l)))for(s=1;s<=t.opts.tableInsertHelperOffset;s++){if(n=t.doc.elementFromPoint(a.pageX-t.win.pageXOffset,a.pageY-t.win.pageYOffset+s),e(n).hasClass("fr-tooltip"))return!0;if(n&&("TH"==n.tagName||"TD"==n.tagName||"TABLE"==n.tagName)&&(e(n).parents(".fr-wrapper").length||t.opts.iframe))return K(a,n.closest("table")),!0;if(r=t.doc.elementFromPoint(a.pageX-t.win.pageXOffset+s,a.pageY-t.win.pageYOffset),e(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(e(r).parents(".fr-wrapper").length||t.opts.iframe))return Y(a,r.closest("table")),!0}t.core.sameInstance(de)&&V()}}function U(e){ue=null;var a=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&X(e,a),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||q(e,a)}function G(){if(be){var a=fe.data("table"),l=a.offset().top-t.win.pageYOffset;t.opts.iframe&&(l+=t.$iframe.offset().top-e(t.o_win).scrollTop()),fe.css("top",l)}}function J(){var a=fe.data("origin"),l=fe.data("release-position");if(a!==l){var s=fe.data("first"),n=fe.data("second"),r=fe.data("table"),o=r.outerWidth();if(null!==s&&null!==n){var i,f,d,c=_(r),p=[],h=[],u=[],b=[];for(i=0;i<c.length;i++)f=e(c[i][s]),d=e(c[i][n]),p[i]=f.outerWidth(),u[i]=d.outerWidth(),h[i]=p[i]/o*100,b[i]=u[i]/o*100;for(i=0;i<c.length;i++){f=e(c[i][s]),d=e(c[i][n]);var g=(h[i]*(p[i]+l-a)/p[i]).toFixed(4);f.css("width",g+"%"),d.css("width",(h[i]+b[i]-g).toFixed(4)+"%")}}else{var m,v=r.parent(),w=o/v.width()*100;m=null==s?(o-l+a)/o*w:(o+l-a)/o*w,r.css("width",Math.round(m).toFixed(4)+"%")}}fe.removeData("origin"),fe.removeData("release-position"),fe.removeData("first"),fe.removeData("second"),fe.removeData("table"),t.undo.saveStep()}function Q(t,a){var l,s=e(a[0][t]).outerWidth();for(l=1;l<a.length;l++)s=Math.min(s,e(a[l][t]).outerWidth());return s}function Z(e,t,a){var l,s=0;for(l=e;t>=l;l++)s+=Q(l,a);return s}function ee(e){if(re().length>1&&pe&&O(),pe===!1&&ce===!1&&be===!1)ue&&clearTimeout(ue),(!t.edit.isDisabled()||t.popups.isVisible("table.edit"))&&(ue=setTimeout(U,30,e));else if(be){var a=e.pageX-t.win.pageXOffset;t.opts.iframe&&(a+=t.$iframe.offset().left);var l=fe.data("max-left"),s=fe.data("max-right");a>=l&&s>=a?fe.css("left",a-t.opts.tableResizerOffset):l>a&&parseFloat(fe.css("left"),10)>l-t.opts.tableResizerOffset?fe.css("left",l-t.opts.tableResizerOffset):a>s&&parseFloat(fe.css("left"),10)<s-t.opts.tableResizerOffset&&fe.css("left",s-t.opts.tableResizerOffset)}else pe&&V()}function te(a){t.node.isEmpty(a.get(0))?a.prepend(e.FE.MARKERS):a.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function ae(a){var l=a.which;if(l==e.FE.KEYCODE.TAB&&0===t.opts.tabSpaces){var s;if(re().length>0)s=t.$el.find(".fr-selected-cell:last");else{var n=t.selection.element();"TD"==n.tagName||"TH"==n.tagName?s=e(n):e(n).closest("td").length>0?s=e(n).closest("td"):e(n).closest("th").length>0&&(s=e(n).closest("th"))}s&&(a.preventDefault(),N(),a.shiftKey?s.prev().length>0?te(s.prev()):s.closest("tr").length>0&&s.closest("tr").prev().length>0?te(s.closest("tr").prev().find("td:last")):s.closest("tbody").length>0&&s.closest("table").find("thead tr").length>0&&te(s.closest("table").find("thead tr th:last")):s.next().length>0?te(s.next()):s.closest("tr").length>0&&s.closest("tr").next().length>0?te(s.closest("tr").next().find("td:first")):s.closest("thead").length>0&&s.closest("table").find("tbody tr").length>0?te(s.closest("table").find("tbody tr td:first")):(s.addClass("fr-selected-cell"),g("below"),I(),te(s.closest("tr").next().find("td:first"))),t.selection.restore())}}function le(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=de.data("selected-cell"),a=de.data("position"),l=de.data("instance")||t;"before"==a?(e.addClass("fr-selected-cell"),l.table.insertColumn(a),e.removeClass("fr-selected-cell")):"after"==a?(e.addClass("fr-selected-cell"),l.table.insertColumn(a),e.removeClass("fr-selected-cell")):"above"==a?(e.addClass("fr-selected-cell"),l.table.insertRow(a),e.removeClass("fr-selected-cell")):"below"==a&&(e.addClass("fr-selected-cell"),l.table.insertRow(a),e.removeClass("fr-selected-cell")),V()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){V()},!0),t.events.$on(t.$wp,"scroll",function(){V()},!0)),de=t.shared.$ti_helper,t.events.on("destroy",function(){de=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function se(){he=null,clearTimeout(ue)}function ne(){re().length>0?l():(t.popups.hide("table.insert"),t.toolbar.showInline())}function re(){return t.$el.get(0).querySelectorAll(".fr-selected-cell")}function oe(){var a=re();if(a.length){for(var l=a[0];l&&"TABLE"!=l.tagName&&l.parentNode!=t.$el.get(0);)l=l.parentNode;return e(l&&"TABLE"==l.tagName?l:[])}return e([])}function ie(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){pe=!1,ce=!1,be=!1,t.events.$on(t.$el,"mousedown",B),t.popups.onShow("image.edit",function(){I(),pe=!1,ce=!1}),t.popups.onShow("link.edit",function(){I(),pe=!1,ce=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&I()}),t.events.$on(t.$el,"mouseenter","th, td",L),t.events.$on(t.$win,"mouseup",H),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",H),t.events.$on(t.$el,"keydown",j),t.events.$on(t.$win,"mousemove",ee),t.events.$on(e(t.o_win),"scroll",G),t.events.on("contentChanged",function(){re().length>0&&(l(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),re().length>0&&l()}))}),t.events.$on(e(t.o_win),"resize",function(){I()}),t.events.on("keydown",function(a){var l=re();if(l.length>0){if(a.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return I(),t.popups.hide("table.edit"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),l=[],!1;if(l.length>1&&a.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var s=0;s<l.length;s++)e(l[s]).html("<br>"),s==l.length-1&&e(l[s]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),l=[],!1}if(l.length>1&&!t.keys.ctrlKey(a))return a.preventDefault(),l=[],!1}l=[]},!0);var a=[];t.events.on("html.beforeGet",function(){a=re();for(var e=0;e<a.length;e++)a[e].className=(a[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.get",function(e){return e=e.replace(/<(td|th)((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/(td|th)>/g,"<$1$2$3>$4</$5>")}),t.events.on("html.afterGet",function(){for(var e=0;e<a.length;e++)a[e].className=(a[e].className?a[e].className+" ":"")+"fr-selected-cell";a=[]}),r(!0),i(!0)}t.events.on("keydown",ae,!0),t.events.on("destroy",se)}var fe,de,ce,pe,he,ue,be;return{_init:ie,insert:p,remove:h,insertRow:g,deleteRow:m,insertColumn:v,deleteColumn:w,mergeCells:C,splitCellVertically:$,splitCellHorizontally:E,addHeader:u,removeHeader:b,setBackground:y,showInsertPopup:a,showEditPopup:l,showColorsPopup:s,back:ne,verticalAlign:M,horizontalAlign:A,applyStyle:F,selectedTable:oe,selectedCells:re}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,a){this.table.insert(t,a),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,callback:function(){var e=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');e.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active"):e.addClass("fr-active"))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var t='<ul class="fr-dropdown-list">',a=e.FE.COMMANDS.tableRows.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li><a class="fr-command" data-cmd="tableRows" data-param1="'+l+'" title="'+this.language.translate(a[l])+'">'+this.language.translate(a[l])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var t='<ul class="fr-dropdown-list">',a=e.FE.COMMANDS.tableColumns.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li><a class="fr-command" data-cmd="tableColumns" data-param1="'+l+'" title="'+this.language.translate(a[l])+'">'+this.language.translate(a[l])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split",
"horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list">',a=e.FE.COMMANDS.tableCells.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li><a class="fr-command" data-cmd="tableCells" data-param1="'+l+'" title="'+this.language.translate(a[l])+'">'+this.language.translate(a[l])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled"),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled"),t.find('a[data-param1="merge"]').removeClass("fr-disabled")):(t.find('a[data-param1="merge"]').addClass("fr-disabled"),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled"),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled"))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li><a class="fr-command" data-cmd="tableStyle" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,a){var l=this.$el.find(".fr-selected-cell").closest("table");l&&a.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",l.hasClass(t))})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list">',a=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li><a class="fr-command" data-cmd="tableCellVerticalAlign" data-param1="'+l.toLowerCase()+'" title="'+this.language.translate(a[l])+'">'+this.language.translate(l)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list">',a=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li><a class="fr-command fr-title" data-cmd="tableCellHorizontalAlign" data-param1="'+l+'" title="'+this.language.translate(a[l])+'">'+this.icon.create("align-"+l)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var a=this.table.selectedCells();a.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(a[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableCellStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li><a class="fr-command" data-cmd="tableCellStyle" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,a){var l=this.$el.find(".fr-selected-cell:first");l&&a.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",l.hasClass(t))})}})});